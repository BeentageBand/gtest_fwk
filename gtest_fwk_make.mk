#=======================================================================================#
# api_makefile.mk
#=======================================================================================#
#  Created on: Oct 3, 2015
#      Author: puch
#=======================================================================================#

#=======================================================================================#
# DEFINE PACKAGE RULE
#=======================================================================================#
define $(_flavor_)_$(_feat_)_MAKE
#=======================================================================================#
# LIB REQUISITES
#=======================================================================================#
##
 # Target Library
 # e.g: $(_flavor_)_$(_feat_)_lib=my_lib_name
 ##
$(_flavor_)_$(_feat_)_lib=gtest
$(_flavor_)_$(_feat_)_ovr_lib_tar=yes
ifndef $(_flavor_)_GTEST_PATH
$(_flavor_)_GTEST_PATH=$($(_flavor_)_$(_feat_)_dir)/googletest/googletest
endif
#=======================================================================================#
# END PACKAGE RULE
#=======================================================================================#
endef
#=======================================================================================#
# LOCAL VARIABLES
#=======================================================================================#

#=======================================================================================#
# LOCAL DEFINES 
#=======================================================================================#
#all : $($(_flavor_)_GTEST_TARG_INC) $($(_flavor_)_LIB_DIR)/lib$($(_flavor_)_lib_name).a 
#
define $(_flavor_)_$(_feat_)_LIB_NAME_MAKE
$(_flavor_)_PROJ_INC+=$($(_flavor_)_GTEST_PATH)/include

$(_flavor_)_clean+=$($(_flavor_)_GTEST_PATH)/make/*.a 
$(_flavor_)_clean+=$($(_flavor_)_GTEST_PATH)/make/*.o
$(_flavor_)_clean+=$($(_flavor_)_GTEST_PATH)/make/*.exe

$($(_flavor_)_$(_feat_)_lib:%=$($(_flavor_)_LIB_DIR)/lib%.a) : \
$($(_flavor_)_$(_feat_)_lib:%=$($(_flavor_)_GTEST_PATH)/make/%.a) $($(_flavor_)_LIB_DIR)
	-cp -Pf $$< $$@;

endef

define LIB_GTEST_MAIN

$($(_flavor_)_$(_feat_)_lib:%=$($(_flavor_)_GTEST_PATH)/make/%.a) : 
	$(MAKE) $($(_flavor_)_$(_feat_)_lib:=.a) -C $($(_flavor_)_GTEST_PATH)/make/;
endef
#=======================================================================================#
# LOCAL DEFINE EXPANSIONS
#=======================================================================================#
$(eval $(call Verbose,$(call $(_flavor_)_$(_feat_)_MAKE)))

#=======================================================================================#
# LOCAL RULES EXPANSIONS
#=======================================================================================#
$(eval $(call Verbose,$(call $(_flavor_)_$(_feat_)_LIB_NAME_MAKE)))

#=======================================================================================#
# INCLUDE PK PROJECT UTILITY
#=======================================================================================#
ifndef Gtest_Main_Def
$(eval $(call Verbose,$(call LIB_GTEST_MAIN)))
Gtest_Main_Def=yes
endif

#=======================================================================================#
# api_makefile.mk
#=======================================================================================#
# Changes Log
#
#
#=======================================================================================#
